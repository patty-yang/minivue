<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<style>
    body {
        padding: 50px;
    }
</style>
<body>

<script type="module">
  // import {
  //   reactive,
  //   effect
  // } from '../../../../node_modules/vue/dist/vue.esm-browser.prod.js'
  import { reactive, effect } from '../../dist/reactivity.esm.js'


  const state = reactive(['a', 'b', 'c'])

  /**
   * 更新数组的 length
   * 更新前 length = 3 => ['a', 'b', 'c']
   * 更新后 length = 1 => ['a']
   *  结论: 要通知访问了 b c d 的 effect 重新执行，就是访问量大于等于 length 的索引
   */
  effect(() => {
    // console.log('state[3] ==> ', state[2])
    console.log('state.length ==> ', state.length)
  })


  /**
   * 但是隐式更新 length
   * 更新前 length = 3 => ['a', 'b', 'c',]
   * 更新后 length = 4 => ['a','b','c', 'd']
   * 隐式更新的方式: 通过 push、pop、shift、unshift 等方法
   */
  setTimeout(() => {
    // state[2] = 'e'
    // state.length = 1
    state.push('d')
    console.log(state)
  }, 1000)

</script>
</body>
</html>